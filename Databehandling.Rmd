---
title: "databehandling"
author: "Søren D. NIelsen"
date: "1 maj 2019"
output: html_document
---

```{r setup, include=FALSE}
library(RandomFields)
#library(kriging)
#library(sp)
#library(gstat)
#library(dplyr)
#library(ggplot2)
#library(scales)
#library(magrittr)
```


```{r}
Aalborg <- read.csv("Aalborg.csv")
#str(Aalborg)
```


```{r}

Aalborg2 <- RFspatialPointsDataFrame(coords = Aalborg[, c("xkoor","ykoor")], data = Aalborg[, c("Kontantpris")], RFparams = list(vdim=1, n=1) )
```

```{r}
dta <- Aalborg2["Kontantpris"]
```



















måske ikke bruge alligevel
```{r}
#A <- matrix(c(Aalborg2$xkoor,Aalborg2$ykoor), nrow=5651)
#y <- conventional2RFspDataFrame(Aalborg2, coords =A )
```

```{r}
minx <- min(Aalborg$xkoor)
miny <- min(Aalborg$ykoor)
numbx <- ceiling(max(Aalborg$xkoor)-minx)
numby <- ceiling(max(Aalborg$ykoor)-miny)
y <- GridTopology(c(minx,miny),c(1,1),c(numbx,numby))
```

```{r}
#Aa <- Aalborg[duplicated(xkoor,ykoor, .keep_all = TRUE)]
```


```{r}
#Aalborg2 <- Aalborg %>% distinct(xkoor,ykoor, .keep_all = TRUE)
```


```{r}
coordinates(Aalborg) <- ~xkoor+ykoor+Salgsdato
Aalborg2 <- sp2RF(Aalborg, param = list(n=1, vdim=50))
Dta <- cbind(Aalborg[,50:51])
```


```{r}
data1 <- Aalborg[,12]
pris <- log(Aalborg$Kontantpris)
model <- pris ~ 1
c <- RFfit(model=model, x=Dta , data= data1, allowdistanceZero=TRUE)
```

```{r}
dist.mat <- as.vector(RFearth2cartesian(Aalborg[,52:53]))
```
```{r}
P <- Aalborg[,12]
model <- RMgauss()+RMtrend(mean = NA)
Pmodel <- RFfit(model = model, distances = dist.mat, dim = 3, data = P)
```



